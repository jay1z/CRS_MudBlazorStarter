@using MudBlazor

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">Select row layout</MudText>
    </TitleContent>

    <DialogContent>
        <MudText Typo="Typo.subtitle1">Choose a column layout for the new row</MudText>
        <MudDivider Class="my-2" />
        <MudGrid>
            <MudItem xs="6">
                <MudPaper Class="pa-3 d-flex flex-column align-center" Style="cursor:pointer;min-height:80px;" @onclick="InsertOneColumn">
                    <div style="display:flex;width:100%;gap:6px;align-items:center;">
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                    </div>
                    <div class="text-center mt-2">1 Column (100%)</div>
                </MudPaper>
            </MudItem>
            <MudItem xs="6">
                <MudPaper Class="pa-3 d-flex flex-column align-center" Style="cursor:pointer;min-height:80px;" @onclick="InsertTwoEqual">
                    <div style="display:flex;width:100%;gap:6px;align-items:center;">
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                    </div>
                    <div class="text-center mt-2">2 Columns (50 /50)</div>
                </MudPaper>
            </MudItem>
            <MudItem xs="6">
                <MudPaper Class="pa-3 d-flex flex-column align-center" Style="cursor:pointer;min-height:80px;" @onclick="InsertTwo33_67">
                    <div style="display:flex;width:100%;gap:6px;align-items:center;">
                        <div style="flex:0.33;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:0.67;height:28px;background:#e9ecef;border-radius:4px;"></div>
                    </div>
                    <div class="text-center mt-2">2 Columns (33 /67)</div>
                </MudPaper>
            </MudItem>
            <MudItem xs="6">
                <MudPaper Class="pa-3 d-flex flex-column align-center" Style="cursor:pointer;min-height:80px;" @onclick="InsertThreeEqual">
                    <div style="display:flex;width:100%;gap:6px;align-items:center;">
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                    </div>
                    <div class="text-center mt-2">3 Columns (33 /33 /33)</div>
                </MudPaper>
            </MudItem>
            <MudItem xs="6">
                <MudPaper Class="pa-3 d-flex flex-column align-center" Style="cursor:pointer;min-height:80px;" @onclick="InsertFourEqual">
                    <div style="display:flex;width:100%;gap:6px;align-items:center;">
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                        <div style="flex:1;height:28px;background:#e9ecef;border-radius:4px;"></div>
                    </div>
                    <div class="text-center mt-2">4 Columns (25% each)</div>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </DialogContent>

    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; }

    private void Choose(string[] widths) {
        try { MudDialog?.Close(DialogResult.Ok(widths)); } catch { }
    }

    private void Cancel() {
        try { MudDialog?.Cancel(); } catch { }
    }

    // Helper methods to avoid inline array literals in attributes
    private void InsertOneColumn() => Choose(new[] { "1" });
    private void InsertTwoEqual() => Choose(new[] { "1", "1" });
    private void InsertTwo33_67() => Choose(new[] { "1/3", "2/3" });
    private void InsertThreeEqual() => Choose(new[] { "1", "1", "1" });
    private void InsertFourEqual() => Choose(new[] { "1", "1", "1", "1" });
}
