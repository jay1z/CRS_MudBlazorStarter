@namespace Horizon.Components.Pages.ReserveStudy.Dialogs
@using Horizon.Models

<MudDialog Style="max-width: 480px;">
    <TitleContent>
        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
            <MudIcon Icon="@Icons.Material.Filled.DeleteOutline" Color="Color.Warning" />
            <MudText Typo="Typo.h6">Delete Reserve Study</MudText>
        </MudStack>
    </TitleContent>
    <DialogContent>
        <MudStack Spacing="4">
            <!-- Icon and main message -->
            <MudStack AlignItems="AlignItems.Center" Spacing="3" Class="pt-2">
                <MudAvatar Size="Size.Large" Style="background: #FFF3E0; width: 64px; height: 64px;">
                    <MudIcon Icon="@Icons.Material.Filled.DeleteSweep" Style="color: #FF8C00; font-size: 32px;" />
                </MudAvatar>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Are you sure you want to delete the reserve study for
                </MudText>
                <MudText Typo="Typo.h6" Align="Align.Center" Style="color: #6A3D9A;">
                    @Study?.Community?.Name
                </MudText>
            </MudStack>

            <!-- Info chip -->
            <MudAlert Severity="Severity.Info" Variant="Variant.Outlined" Dense="true" Icon="@Icons.Material.Filled.Info" Class="mt-2">
                Don't worry! You can restore this study later from the <strong>"Deleted"</strong> filter.
            </MudAlert>

            <!-- Study details card -->
            <MudPaper Elevation="0" Class="pa-3" Style="background: linear-gradient(135deg, #f5f5f5 0%, #eeeeee 100%); border-radius: 8px;">
                <MudStack Spacing="2">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Business" Size="Size.Small" Style="color: #666;" />
                        <MudText Typo="Typo.body2" Style="color: #666;">Community:</MudText>
                        <MudText Typo="Typo.body2" Style="font-weight: 500;">@Study?.Community?.Name</MudText>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Person" Size="Size.Small" Style="color: #666;" />
                        <MudText Typo="Typo.body2" Style="color: #666;">Contact:</MudText>
                        <MudText Typo="Typo.body2" Style="font-weight: 500;">@(Study?.PointOfContact?.FullName ?? "Not assigned")</MudText>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.CalendarToday" Size="Size.Small" Style="color: #666;" />
                        <MudText Typo="Typo.body2" Style="color: #666;">Created:</MudText>
                        <MudText Typo="Typo.body2" Style="font-weight: 500;">@Study?.DateCreated?.ToString("MMMM d, yyyy")</MudText>
                    </MudStack>
                </MudStack>
            </MudPaper>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudStack Row="true" Spacing="2" Class="pa-2" Style="width: 100%;" Justify="Justify.FlexEnd">
            <MudButton OnClick="Cancel" 
                       Variant="Variant.Text" 
                       Color="Color.Default"
                       Size="Size.Medium">
                Cancel
            </MudButton>
            <MudButton OnClick="Submit" 
                       Variant="Variant.Filled" 
                       Color="Color.Warning"
                       StartIcon="@Icons.Material.Filled.Delete"
                       Size="Size.Medium">
                Delete Study
            </MudButton>
        </MudStack>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter] public ReserveStudy Study { get; set; } = null!;

    private void Submit() => MudDialog.Close(DialogResult.Ok(true));
    private void Cancel() => MudDialog.Cancel();
}
